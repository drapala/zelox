# REPO_MAP.md - Repository Navigation Guide

**Generated:** 2025-09-01  
**Purpose:** LLM-first navigation and context discovery

## Repository Structure

```
zelox/
├── docs/                    # Documentation & decisions
│   ├── adr/                # Architecture Decision Records
│   └── repo/               # Repository metadata
├── features/               # Vertical feature slices (VSA)
├── shared/                 # Truly shared utilities only
└── scripts/                # LLM-first tooling
```

## Quick Navigation

### For Feature Development
1. **Start here:** `features/[feature_name]/README.md`
2. **Business logic:** `features/[feature_name]/service.py`
3. **Tests:** `features/[feature_name]/tests.py`
4. **API:** `features/[feature_name]/api.py`

### For Architecture Changes
1. **Decisions:** `docs/adr/`
2. **Patterns:** `CLAUDE.md`
3. **Current state:** `docs/repo/FACTS.md`

### For LLM Agents
1. **Entry point:** This file (REPO_MAP.md)
2. **Module index:** `docs/repo/INDEX.yaml`
3. **Recovery patterns:** `docs/repo/recovery_patterns.yaml`

## Current Features

### Template
- **Path:** `features/template/`
- **Capabilities:** Business Logic, HTTP API, Tests
- **Files:** 6 Python modules


## LLM-First Tooling

### Core Scripts (Refactored)
- **`domain_analyzer_refactored.py`**: Domain analysis CLI orchestrator (120 LOC)
- **`validate_schemas.py`**: Schema validation orchestrator (144 LOC)
- **`semantic_analyzer_refactored.py`**: Semantic analysis CLI (130 LOC)
- **`check_llm_readiness.py`**: Python module
- **`check_readme_coverage.py`**: Python module
- **`check_pr_loc.py`**: Simplified PR validation entry point (168 LOC)
- **`gen_repo_map.py`**: Auto-generate REPO_MAP.md from current codebase state

### PR Validation Module (Refactored)
- **Path:** `scripts/pr_validation/`
- **Purpose:** Modular PR size validation with configurable limits
- **Modules:**
  - `loc_counter.py`: Git operations and line counting (80 LOC)
  - `file_categorizer.py`: File categorization logic (70 LOC)
  - `pr_validator.py`: Validation against limits (80 LOC)
  - `pr_reporter.py`: Report generation (90 LOC)
  - `config.yaml`: Configurable thresholds
- **Entry:** `python3 scripts/check_pr_loc.py`
- **Complexity:** Reduced from 36.8 to <15 confusion score

### Domain Analysis (Refactored VSA)
- **Path:** `scripts/domain_analysis/`
- **Purpose:** Extract and analyze domain patterns for LLM-friendly architecture
- **Modules:**
  - `domain_models.py`: Domain entity extraction (150 LOC)
  - `domain_rules.py`: Business rule analysis (145 LOC)
  - `domain_mapper.py`: Repository mapping (120 LOC)
  - `domain_reporter.py`: Report generation & CLI (100 LOC)
- **Entry:** `python3 scripts/domain_analysis/domain_reporter.py --report`
- **Complexity:** Reduced from 81.5 to <30 confusion score


## Architecture Decisions

| ADR | Title | Status | Impact |
|-----|-------|---------|---------|
| [000](../adr/000-template.md) | Template | accepted | medium |
| [001](../adr/001-adopt-llm-first-architecture.md) | Adopt Llm First Architecture | accepted | medium |
| [002](../adr/002-adopt-bdd-lite.md) | Adopt Bdd Lite | accepted | medium |
| [003](../adr/003-pr-loc-gate.md) | Pr Loc Gate | accepted | medium |
| [004](../adr/004-llm-first-observability.md) | Llm First Observability | accepted | medium |
| [005](../adr/005-branch-naming-and-pr-standards.md) | Branch Naming And Pr Standards | accepted | medium |
| [006](../adr/006-differentiated-loc-limits.md) | Differentiated Loc Limits | accepted | medium |


## Common Tasks

### Adding a New Feature
1. `mkdir features/[feature_name]`
2. Copy template from `features/template/`
3. Update `docs/repo/INDEX.yaml`
4. Run `make llm.check`

### Making Changes
1. Check `features/[feature]/README.md` first
2. Look for BDD-Lite scenarios in tests
3. Update `OBS_PLAN.md` if changing APIs
4. Run `make pr.loc` before committing

## Last Updated
- **Auto-generated:** 2025-09-01
- **Script:** `scripts/gen_repo_map.py`
- **Next review:** When repository structure changes significantly
